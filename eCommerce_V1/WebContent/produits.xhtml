<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

<h:head>
	<title>Page Produits</title>
	<h:outputStylesheet library="css" name="styleSheet.css"  />
</h:head>
<h:body>

	<ui:insert name="page">
		<ui:include src="/template/layout.xhtml"></ui:include>
	</ui:insert>

		
<p:outputPanel id="lol2">
	
<div class="ui-g" style="margin-left:2%;margin-right:2%" >
    <div class="ui-g-12">----</div>
	<h:form>
	<c:forEach items="#{sessionScope.listeProduits}" var="pro" varStatus="metadata" >
	  

	  <div class="ui-g-12">
	  <div class="ui-g-12" style="border-style: solid;border-width:1px;border-color:grey;background-color:rgba(230,230,230,0.9)">
	   		   	
	   	<div class="ui-g-3 " >
	 	 	<h:graphicImage  class="imageTaille" value="#{pro.image}"/>
		</div>
	  	<div class="ui-g-7"><h:outputText style="color:black" value="#{pro.description}"/></div>
	    <div class="ui-g-2" style="background-color:rgba(130,230,130,0.6)" >
				<div class="ui-g-12"/>
				prix:
				<div class="ui-g-12"/>
				<h:form>
				<div class="ui-g-6">
					<h:inputText style="width:50px" value="#{ligneCommandeMB.ligne.quantite}" placeholder="Qté" />
				</div>
				<div class="ui-g-6">
				<p:commandButton value="+"
					action="#{ligneCommandeMB.ajouterLigneCommande}" update="@all">
					<f:setPropertyActionListener value="#{pro}"
						target="#{ligneCommandeMB.ligne.produit}"></f:setPropertyActionListener>
				</p:commandButton>
				</div>
				</h:form>
				<div class="ui-g-12"><h:outputText style="color:black" value="Quantite:"/></div>
						
				<div class="ui-g-12"><h:outputText style="color:black" value="Reduction:"/></div>
				
		</div>
	  	
	  		<c:if test="${not empty sessionScope.adminSession}">
	  			<div class="ui-g-12  " >
	  				<div class="ui-g-2 "> <p:commandButton value="Supprimer" ></p:commandButton> </div>
	  				<div class="ui-g-2 "> <p:commandButton value="Modifier" ></p:commandButton> </div>
	  			  	</div>
	  		</c:if>
	  </div>
	  <div class="ui-g-12"></div>
	</div>
		
	</c:forEach>
	 </h:form>
 </div>
	
</p:outputPanel>










	<h1>Liste des produits</h1>


	<p:dataTable var="pro" value="#{sessionScope.listeProduits}">
		<p:column headerText="ID">
			<h:outputText value="#{pro.idProduit}" />
		</p:column>

		<p:column headerText="Designation">
			<h:outputText value="#{pro.designation}" />
		</p:column>

		<p:column headerText="Description">
			<h:outputText value="#{pro.description}" />
		</p:column>

		<p:column headerText="Prix">
			<h:outputText value="#{pro.prix}" />
		</p:column>

		<p:column headerText="Qté">
			<h:outputText value="#{pro.quantite}" />
		</p:column>

		<p:column headerText="Selectionne">
			<h:outputText value="#{pro.selectionne}" />
		</p:column>

		<p:column headerText="Photo">
			<h:outputText value="#{pro.photo}" />
		</p:column>

		<p:column>
			<h:form>
				<h:inputText value="#{ligneCommandeMB.ligne.quantite}"
					placeholder="Qté" />

				<p:commandButton value="Ajouter au panier"
					action="#{ligneCommandeMB.ajouterLigneCommande}" update="@all">
					<f:setPropertyActionListener value="#{pro}"
						target="#{ligneCommandeMB.ligne.produit}"></f:setPropertyActionListener>
				</p:commandButton>
			</h:form>
		</p:column>


		<c:if test="${not empty sessionScope.adminSession}">
			<p:column>
				<h:form>
					<p:commandButton value="Supprimer produit"
						action="#{produitMB.supprimerProduit}" update="@all">
						<f:setPropertyActionListener value="#{pro}"
							target="#{produitMB.produit}"></f:setPropertyActionListener>
					</p:commandButton>
				</h:form>
			</p:column>

		</c:if>
		<c:if test="${not empty sessionScope.adminSession}">
			<p:column>
				<h:form>
					<p:commandButton value="Modifier produit"
						action="modifProduit.xhtml" update="@all">
						<f:setPropertyActionListener value="#{pro}"
							target="#{produitMB.produit}"></f:setPropertyActionListener>
					</p:commandButton>
				</h:form>
			</p:column>

		</c:if>


	</p:dataTable>


</h:body>

</html>
